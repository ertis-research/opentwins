"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6594],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>f});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=p(n),m=i,f=d["".concat(s,".").concat(m)]||d[m]||c[m]||r;return n?a.createElement(f,o(o({ref:t},u),{},{components:n})):a.createElement(f,o({ref:t},u))}));function f(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[d]="string"==typeof e?e:i,o[1]=l;for(var p=2;p<r;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},6253:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>c,frontMatter:()=>r,metadata:()=>l,toc:()=>p});var a=n(7462),i=(n(7294),n(3905));const r={sidebar_position:1},o="Base configuration",l={unversionedId:"guides/unity/base-config",id:"guides/unity/base-config",title:"Base configuration",description:"This section describes the requirements, configuration, and build process necessary to embed a Unity project into Grafana.",source:"@site/docs/guides/unity/base-config.mdx",sourceDirName:"guides/unity",slug:"/guides/unity/base-config",permalink:"/opentwins/docs/guides/unity/base-config",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/guides/unity/base-config.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Unity visualization",permalink:"/opentwins/docs/category/unity-visualization"},next:{title:"From Grafana to Unity",permalink:"/opentwins/docs/guides/unity/grafana-to-unity"}},s={},p=[{value:"Requirements",id:"requirements",level:2},{value:"In Unity",id:"in-unity",level:2},{value:"Creating a project",id:"creating-a-project",level:3},{value:"Preventing keyboard input capture",id:"preventing-keyboard-input-capture",level:3},{value:"Exporting to WebGL",id:"exporting-to-webgl",level:3},{value:"In Grafana",id:"in-grafana",level:2},{value:"Adding the plugin to a dashboard",id:"adding-the-plugin-to-a-dashboard",level:3},{value:"Configuring the panel",id:"configuring-the-panel",level:3}],u={toc:p},d="wrapper";function c(e){let{components:t,...n}=e;return(0,i.kt)(d,(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"base-configuration"},"Base configuration"),(0,i.kt)("p",null,"This section describes the requirements, configuration, and build process necessary to embed a Unity project into Grafana."),(0,i.kt)("p",null,"These steps are ",(0,i.kt)("strong",{parentName:"p"},"mandatory for all Unity projects")," intended for integration, regardless of whether bidirectional communication between Grafana and Unity is implemented."),(0,i.kt)("p",null,"Refer to the remaining documentation for details on sending data ",(0,i.kt)("a",{parentName:"p",href:"/opentwins/docs/guides/unity/grafana-to-unity"},(0,i.kt)("strong",{parentName:"a"},"from Grafana to Unity"))," and ",(0,i.kt)("a",{parentName:"p",href:"/opentwins/docs/guides/unity/unity-to-grafana"},(0,i.kt)("strong",{parentName:"a"},"from Unity to Grafana")),"."),(0,i.kt)("h2",{id:"requirements"},"Requirements"),(0,i.kt)("p",null,"Before beginning, ensure you have the following:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://unity.com/es/download"},"Unity"),": ",(0,i.kt)("strong",{parentName:"li"},"Version 2020.1.0 or newer")," is required. Compatibility has been ",(0,i.kt)("strong",{parentName:"li"},"verified up to Unity 2021.x"),", and later versions may not be fully supported. Older Unity releases (pre-2020) are no longer supported (",(0,i.kt)("a",{parentName:"li",href:"https://react-unity-webgl.dev/docs/getting-started/installation#unity-version-compatibility"},"see compatibility notes"),")."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://learn.unity.com/tutorial/install-the-webgl-module"},"WebGL Build Support"),": Must be installed via Unity Hub."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://grafana.com/grafana/download"},"Grafana"),": Preinstalled in OpenTwins by default."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/ertis-research/grafana-panel-unity"},"Unity panel plugin for Grafana"),": Preinstalled in OpenTwins by default.")),(0,i.kt)("h2",{id:"in-unity"},"In Unity"),(0,i.kt)("h3",{id:"creating-a-project"},"Creating a project"),(0,i.kt)("p",null,"Any Unity project capable of exporting to ",(0,i.kt)("a",{parentName:"p",href:"https://get.webgl.org/"},"WebGL")," should be compatible with our plugin. is compatible with the plugin. For detailed guidance, see the ",(0,i.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/Manual/create-first-project.html"},"Unity documentation"),"."),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"If you're new to 3D modeling, we highly recommend starting with ",(0,i.kt)("a",{parentName:"p",href:"https://www.blender.org/"},"Blender"),", a free, open-source tool that works seamlessly with Unity. Simply add your ",(0,i.kt)("inlineCode",{parentName:"p"},".blend")," file to the Assets folder of your Unity project, and updates in Blender will automatically sync in Unity.")),(0,i.kt)("h3",{id:"preventing-keyboard-input-capture"},"Preventing keyboard input capture"),(0,i.kt)("p",null,"Within your Unity project, create and attach the following script to a persistent GameObject (e.g., the main camera). This prevents Unity from capturing all keyboard inputs, ensuring Grafana input fields remain usable when a WebGL model is loaded."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-csharp",metastring:'title="essential.cs"',title:'"essential.cs"'},"using System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\n\npublic class DisableKeyboardInput : MonoBehaviour\n{\n    void Start()\n    {\n        #if !UNITY_EDITOR && UNITY_WEBGL\n            UnityEngine.WebGLInput.captureAllKeyboardInput = false;\n        #endif\n    }\n}\n")),(0,i.kt)("admonition",{type:"danger"},(0,i.kt)("p",{parentName:"admonition"},"If this script is not included, Grafana input fields will not accept keyboard input while a WebGL model is loaded. The dashboard will become unusable until the page is refreshed.")),(0,i.kt)("h3",{id:"exporting-to-webgl"},"Exporting to WebGL"),(0,i.kt)("p",null,"Follow these steps to build your Unity project:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Navigate to ",(0,i.kt)("inlineCode",{parentName:"li"},"File > Build Settings\u2026")),(0,i.kt)("li",{parentName:"ol"},"In the ",(0,i.kt)("strong",{parentName:"li"},"Platform")," section, select ",(0,i.kt)("strong",{parentName:"li"},"WebGL")," and click ",(0,i.kt)("inlineCode",{parentName:"li"},"Switch Platform"),"."),(0,i.kt)("li",{parentName:"ol"},"Disable build compression by going to:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Navigate to ",(0,i.kt)("inlineCode",{parentName:"li"},"File > Build Settings\u2026 > Player Settings\u2026 > Publishing Settings")),(0,i.kt)("li",{parentName:"ul"},"Set ",(0,i.kt)("inlineCode",{parentName:"li"},"Compression Format")," to ",(0,i.kt)("strong",{parentName:"li"},"Disabled")))),(0,i.kt)("li",{parentName:"ol"},"Click ",(0,i.kt)("inlineCode",{parentName:"li"},"Build")," and specify the output folder.")),(0,i.kt)("p",null,"The build will generate the following required files:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<project>.data")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<project>.wasm")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<project>.framework.js")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<project>.loader.js"))),(0,i.kt)("p",null,"These files must be uploaded or referenced in Grafana to display the Unity model."),(0,i.kt)("h2",{id:"in-grafana"},"In Grafana"),(0,i.kt)("h3",{id:"adding-the-plugin-to-a-dashboard"},"Adding the plugin to a dashboard"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Open an existing Grafana dashboard or create a new one."),(0,i.kt)("li",{parentName:"ol"},"Add a new panel by clicking ",(0,i.kt)("inlineCode",{parentName:"li"},"Add > Visualization"),"."),(0,i.kt)("li",{parentName:"ol"},"From the visualization types menu, select ",(0,i.kt)("strong",{parentName:"li"},"Unity"),". ")),(0,i.kt)("p",null,"See the ",(0,i.kt)("a",{parentName:"p",href:"https://grafana.com/docs/grafana/latest/dashboards/build-dashboards/create-dashboard/"},"Grafana documentation")," for more details."),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"If the Unity option does not appear:"),(0,i.kt)("ul",{parentName:"admonition"},(0,i.kt)("li",{parentName:"ul"},"Verify the plugin installation under ",(0,i.kt)("inlineCode",{parentName:"li"},"Administration > Plugins and data > Plugins"),"."),(0,i.kt)("li",{parentName:"ul"},"Search for ",(0,i.kt)("strong",{parentName:"li"},"Unity"),"."),(0,i.kt)("li",{parentName:"ul"},"If missing, reinstall or troubleshoot using the ",(0,i.kt)("a",{parentName:"li",href:"/opentwins/docs/installation/manual/unity"},"installation documentation"),"."))),(0,i.kt)("h3",{id:"configuring-the-panel"},"Configuring the panel"),(0,i.kt)("p",null,"To load your 3D model, you must provide the four exported WebGL files. Refer to the ",(0,i.kt)("a",{parentName:"p",href:"/opentwins/docs/guides/unity/plugin-docs"},"plugin\u2019s options documentation")," for details on how these files are mapped. "),(0,i.kt)("p",null,"The plugin supports three methods:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"External links (recommended)"),": Provide direct file URLs. Por ejemplo, puedes utilizar un Minio para subir los archivos."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Grafana public folder"),": Place files in Grafana\u2019s /public directory and reference relative paths. Por ejemplo, el directorio de Windows para Grafana suele ser C:\\Program Files\\GrafanaLabs\\grafana\\public. En contenedores, habria que a\xf1adir un initContainer que a\xf1ada los archivos... (explicalo tu chatgpt)."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Drag and drop (not recommended for production)"),": Upload files directly into the panel configuration.")),(0,i.kt)("p",null,"Once the four files are provided, click ",(0,i.kt)("inlineCode",{parentName:"p"},"Apply")," (blue button) to return to the dashboard."),(0,i.kt)("p",null,"If configured correctly, the ",(0,i.kt)("strong",{parentName:"p"},"Unity 3D model will automatically load")," in the panel."))}c.isMDXComponent=!0}}]);